import { Injectable, effect } from '@angular/core';
import { LocaleService } from './locale.service';
import { TranslateService } from '@ngx-translate/core';

@Injectable({
    providedIn: 'root'
})
export class TranslationsService {
    

    constructor(
        private readonly localeService: LocaleService,
        private readonly translateService: TranslateService,
    ) {
        this.translateService.setDefaultLang(this.localeService.systemDefaultLocale);

        effect(() => {
            this.translateService.use(this.localeService.currentLocale());
        });
    }

    getInstantTranslation(key: string | string[], params?: object | undefined): string {
        return this.translateService.instant(key, params);
    }
}
