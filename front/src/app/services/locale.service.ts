import { Inject, Injectable, Signal, WritableSignal, signal } from '@angular/core';
import { DEFAULT_LOCALE } from '../tokens/default-locale.token';
import { SUPPORTED_LOCALES } from '../tokens/supported-locale.token';

@Injectable({
    providedIn: 'root'
})
export class LocaleService {
    private readonly currentLocaleWritableSignal: WritableSignal<string> = signal<string>(this.defaultLocale);

    public readonly currentLocale: Signal<string> = this.currentLocaleWritableSignal.asReadonly();

    get systemDefaultLocale(): string {
        return this.defaultLocale;
    }

    get systemSupportedLocales(): string[] {
        return this.supportedLocales;
    }

    constructor(
        @Inject(DEFAULT_LOCALE) private readonly defaultLocale: string,
        @Inject(SUPPORTED_LOCALES) private readonly supportedLocales: string[],
    ) {

    }

    public setLocale(locale: string): void {
        this.currentLocaleWritableSignal.set(locale);
    }
}
